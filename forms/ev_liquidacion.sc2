*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="ev_liquidacion.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
#INCLUDE "..\include\tastrade.h"

DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="2" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor3" UniqueID="" Timestamp="" />

	DataSource = .NULL.
	Height = 316
	Left = 475
	Name = "Dataenvironment"
	Top = 220
	Width = 520

	ADD OBJECT 'Cursor1' AS cursor WITH ;
		Alias = "ev_eventos", ;
		CursorSource = "ev_eventos", ;
		Database = ..\data\datos.dbc, ;
		Height = 136, ;
		Left = 11, ;
		Name = "Cursor1", ;
		NoDataOnLoad = .T., ;
		Top = 19, ;
		Width = 91
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor2' AS cursor WITH ;
		Alias = "ev_eventosdet", ;
		BufferModeOverride = 5, ;
		CursorSource = "ev_eventosdet", ;
		Database = ..\data\datos.dbc, ;
		Filter = "Sel=.t. or CalcularCierre=.t.", ;
		Height = 131, ;
		Left = 124, ;
		Name = "Cursor2", ;
		NoDataOnLoad = .T., ;
		Top = 18, ;
		Width = 149
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor3' AS cursor WITH ;
		Alias = "ev_eventosval", ;
		BufferModeOverride = 5, ;
		CursorSource = "ev_eventosval", ;
		Database = ..\data\datos.dbc, ;
		Filter = "Concepto<>'Seña'", ;
		Height = 90, ;
		Left = 290, ;
		Name = "Cursor3", ;
		NoDataOnLoad = .T., ;
		Top = 20, ;
		Width = 91
		*< END OBJECT: BaseClass="cursor" />

ENDDEFINE

DEFINE CLASS tsmovform12 AS tsmovform OF "..\libs\tsbase.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel10" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column2.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column2.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Banco.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Banco.Tscombobox3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column4.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column4.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Tipo.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Tipo.Tscombobox1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column5.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tsfact1.Column5.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Campo_busca1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.txtAgasajado" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.lblAgasajado" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Column4.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Column4.Idproducto1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Column5.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Column5.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Precio.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Precio.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Descripcion.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Descripcion.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Total.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.grdEv_eventosdet.Total.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.total" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.txtImportetotal" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.lblImportetotal" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.txtAdelanto" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.txtExcedente" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Saldo" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel4" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tscommandbutton4" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tscommandbutton1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tscheckbox1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel5" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.TotalGeneral" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel6" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Iva" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.SubTotal" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel7" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Descuento" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel8" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.txtTotalValor" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel9" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel11" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel12" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.NroAdicional" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel13" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.CostoAdicional" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel14" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tscommandbutton3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tscommandbutton2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Cbosucursal1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Pageframe1.Page1.Tslabel15" UniqueID="" Timestamp="" />

	*<DefinedPropArrayMethod>
		*p: sucursal
	*</DefinedPropArrayMethod>

	Caption = "Liquidación"
	DoCreate = .T.
	Height = 484
	identidad = IdEvento
	lallowdelete = .F.
	lallownew = .F.
	Name = "Tsmovform12"
	sucursal = .F.
	tabla1 = ev_Eventos
	tabla2 = ev_EventosDet
	tabla3 = ev_EventosVal
	tablaconsulta = Eventos
	Width = 747
	lblRequerido.Name = "lblRequerido"
	Pageframe1.ErasePage = .T.
	Pageframe1.Height = 486
	Pageframe1.Left = 0
	Pageframe1.Name = "Pageframe1"
	Pageframe1.Page1.Name = "Page1"
	Pageframe1.Page2.grdList.Name = "grdList"
	Pageframe1.Page2.Name = "Page2"
	Pageframe1.Top = 0
	Pageframe1.Width = 748

	ADD OBJECT 'Pageframe1.Page1.Campo_busca1' AS campo_busca WITH ;
		ControlSource = "ev_eventos.nroevento", ;
		datoayuda = Liquidacion, ;
		Left = 83, ;
		Name = "Campo_busca1", ;
		Top = 14, ;
		ZOrderSet = 2
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Cbosucursal1' AS cbosucursal WITH ;
		editable = .F., ;
		Height = 22, ;
		Left = 290, ;
		Name = "Cbosucursal1", ;
		Top = 13, ;
		Width = 165
		*< END OBJECT: ClassLib="..\libs\futura.vcx" BaseClass="combobox" />

	ADD OBJECT 'Pageframe1.Page1.CostoAdicional' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.costoadicional", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "CostoAdicional", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 104, ;
		Width = 108, ;
		ZOrderSet = 32
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Descuento' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.descuento", ;
		Enabled = .T., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "Descuento", ;
		ReadOnly = .F., ;
		TabIndex = 1, ;
		Top = 164, ;
		Width = 108, ;
		ZOrderSet = 24
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet' AS tsgrid WITH ;
		campo = IdEvento,IdEmpresa,CalcularCierre,Sel,Tipo, ;
		cfieldtosum = Cantidad*Precio, ;
		ColumnCount = 5, ;
		editable = .T., ;
		FontSize = 8, ;
		Height = 172, ;
		Left = 11, ;
		Name = "grdEv_eventosdet", ;
		Panel = 1, ;
		RecordSource = "ev_eventosdet", ;
		RecordSourceType = 1, ;
		RowHeight = 17, ;
		Top = 88, ;
		valor = ev_Eventos.IdEvento,oApp.Empresa,.t.,.t.,'P', ;
		valorvariable = ev_Eventos.IdEvento, ;
		variablevista = m.IdEvento, ;
		Width = 444, ;
		ZOrderSet = 6, ;
		Column1.ColumnOrder = 1, ;
		Column1.ControlSource = "ev_eventosdet.idproducto", ;
		Column1.FontSize = 8, ;
		Column1.Name = "Column4", ;
		Column1.ReadOnly = .T., ;
		Column1.Visible = .T., ;
		Column1.Width = 49, ;
		Column2.ColumnOrder = 3, ;
		Column2.ControlSource = "ev_eventosdet.cantidad", ;
		Column2.FontSize = 8, ;
		Column2.InputMask = "999,999", ;
		Column2.Name = "Column5", ;
		Column2.Visible = .T., ;
		Column2.Width = 48, ;
		Column3.BackColor = 217,227,244, ;
		Column3.ColumnOrder = 4, ;
		Column3.ControlSource = "ev_eventosdet.precio", ;
		Column3.FontSize = 8, ;
		Column3.InputMask = "999,999,999", ;
		Column3.Name = "Precio", ;
		Column3.ReadOnly = .T., ;
		Column3.Visible = .T., ;
		Column3.Width = 71, ;
		Column4.BackColor = 217,227,244, ;
		Column4.ColumnOrder = 2, ;
		Column4.ControlSource = "ev_eventosdet.descripcion", ;
		Column4.FontSize = 8, ;
		Column4.Name = "Descripcion", ;
		Column4.ReadOnly = .T., ;
		Column4.Visible = .T., ;
		Column4.Width = 152, ;
		Column5.BackColor = 217,227,244, ;
		Column5.ControlSource = "Precio*Cantidad", ;
		Column5.FontSize = 8, ;
		Column5.InputMask = "999,999,999", ;
		Column5.Name = "Total", ;
		Column5.ReadOnly = .T., ;
		Column5.Visible = .T., ;
		Column5.Width = 79
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="grid" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Column4.Header1' AS header WITH ;
		Caption = "Producto", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Column4.Idproducto1' AS idproducto WITH ;
		actualizar = .F., ;
		copiarcampos = Precio,Ult_Costo as Costo, ;
		Left = 211, ;
		Name = "Idproducto1", ;
		objeto = this.parent.parent.Descripcion.text1, ;
		pegarcampos = Precio,Costo, ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Top = 25
		*< END OBJECT: ClassLib="..\libs\futura.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Column5.Header1' AS header WITH ;
		Caption = "Cantidad", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Column5.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		SelectOnEntry = .T., ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Descripcion.Header1' AS header WITH ;
		Caption = "Descripcion", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Descripcion.Text1' AS textbox WITH ;
		BackColor = 217,227,244, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Precio.Header1' AS header WITH ;
		Caption = "Precio", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Precio.Text1' AS textbox WITH ;
		BackColor = 217,227,244, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Total.Header1' AS header WITH ;
		Caption = "Total", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.grdEv_eventosdet.Total.Text1' AS textbox WITH ;
		BackColor = 217,227,244, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Iva' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.iva", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 623, ;
		Name = "Iva", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 224, ;
		Width = 84, ;
		ZOrderSet = 21
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.lblAgasajado' AS tslabel WITH ;
		Caption = "Agasajado", ;
		Height = 16, ;
		Left = 16, ;
		Name = "lblAgasajado", ;
		TabIndex = 1, ;
		Top = 44, ;
		Width = 59, ;
		ZOrderSet = 4
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.lblImportetotal' AS tslabel WITH ;
		Caption = "Total Contrato", ;
		Height = 16, ;
		Left = 503, ;
		Name = "lblImportetotal", ;
		TabIndex = 1, ;
		Top = 44, ;
		Width = 88, ;
		ZOrderSet = 9
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.NroAdicional' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.nroadicional", ;
		editable = .T., ;
		Enabled = .T., ;
		Height = 22, ;
		InputMask = "999", ;
		Left = 599, ;
		Name = "NroAdicional", ;
		ReadOnly = .F., ;
		TabIndex = 1, ;
		Top = 74, ;
		Width = 108, ;
		ZOrderSet = 30
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Saldo' AS tstextbox WITH ;
		Comment = "", ;
		DisabledForeColor = 0,0,160, ;
		editable = .F., ;
		Enabled = .F., ;
		FontBold = .T., ;
		ForeColor = 0,0,160, ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "Saldo", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 314, ;
		Width = 108, ;
		ZOrderSet = 14
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.SubTotal' AS tstextbox WITH ;
		Comment = "", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "SubTotal", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 194, ;
		Width = 108, ;
		ZOrderSet = 22
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.total' AS tstextbox WITH ;
		Comment = "", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 334, ;
		MaxLength = 50, ;
		Name = "total", ;
		TabIndex = 1, ;
		Top = 262, ;
		Width = 84, ;
		ZOrderSet = 7
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.TotalGeneral' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.totalgeneral", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "TotalGeneral", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 254, ;
		Width = 108, ;
		ZOrderSet = 19
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Tscheckbox1' AS tscheckbox WITH ;
		Alignment = 0, ;
		Caption = "", ;
		ControlSource = "ev_eventos.calculariva", ;
		Height = 15, ;
		Left = 599, ;
		Name = "Tscheckbox1", ;
		Top = 224, ;
		Width = 24, ;
		ZOrderSet = 17
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="checkbox" />

	ADD OBJECT 'Pageframe1.Page1.Tscommandbutton1' AS tscommandbutton WITH ;
		Caption = "Cerrar Contrato y Facturar", ;
		Height = 26, ;
		Left = 539, ;
		Name = "Tscommandbutton1", ;
		Top = 384, ;
		Width = 168, ;
		ZOrderSet = 16
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Pageframe1.Page1.Tscommandbutton2' AS tscommandbutton WITH ;
		Caption = "Agregar Valores", ;
		editable = .T., ;
		Height = 26, ;
		Left = 335, ;
		Name = "Tscommandbutton2", ;
		Top = 308, ;
		Width = 120, ;
		ZOrderSet = 34
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Pageframe1.Page1.Tscommandbutton3' AS tscommandbutton WITH ;
		Caption = "Eliminar Valores", ;
		editable = .T., ;
		Height = 26, ;
		Left = 215, ;
		Name = "Tscommandbutton3", ;
		Top = 308, ;
		Width = 120, ;
		ZOrderSet = 35
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Pageframe1.Page1.Tscommandbutton4' AS tscommandbutton WITH ;
		Caption = "Eliminar Factura", ;
		Height = 26, ;
		Left = 539, ;
		Name = "Tscommandbutton4", ;
		Top = 418, ;
		Width = 168, ;
		ZOrderSet = 16
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1' AS tsgrid WITH ;
		AllowAddNew = .F., ;
		AllowHeaderSizing = .F., ;
		AllowRowSizing = .F., ;
		campo = IdEvento,idempresa,IdMoneda,Importe,Concepto, ;
		cfieldtosum = Importe, ;
		ChildOrder = "", ;
		ColumnCount = 5, ;
		DeleteMark = .F., ;
		editable = .T., ;
		FontSize = 8, ;
		GridLines = 2, ;
		HeaderHeight = 20, ;
		Height = 78, ;
		Highlight = .F., ;
		Left = 16, ;
		LinkMaster = "", ;
		Name = "Tsfact1", ;
		Panel = 1, ;
		PanelLink = .T., ;
		RecordMark = .F., ;
		RecordSource = "ev_eventosval", ;
		RelationalExpr = "", ;
		RightToLeft = .T., ;
		RowHeight = 22, ;
		ScrollBars = 2, ;
		SplitBar = .F., ;
		TabIndex = 14, ;
		Top = 337, ;
		valor = ev_Eventos.IdeVento,oapp.empresa,'GS', Ev_Eventos.TotalGeneral - Ev_Eventos.Adelando,'Liquid', ;
		valorvariable = ev_Eventos.IdEvento, ;
		variablevista = m.IdEvento, ;
		Width = 434, ;
		ZOrderSet = 1, ;
		Column1.ColumnOrder = 3, ;
		Column1.ControlSource = "ev_eventosval.nrocheque", ;
		Column1.FontSize = 8, ;
		Column1.Name = "Column2", ;
		Column1.Visible = .T., ;
		Column1.Width = 66, ;
		Column2.ColumnOrder = 2, ;
		Column2.ControlSource = "ev_eventosval.idbanco", ;
		Column2.FontSize = 8, ;
		Column2.Name = "Banco", ;
		Column2.Sparse = .F., ;
		Column2.Visible = .T., ;
		Column2.Width = 120, ;
		Column3.ColumnOrder = 5, ;
		Column3.ControlSource = "ev_eventosval.importe", ;
		Column3.DynamicInputMask = "", ;
		Column3.FontSize = 8, ;
		Column3.InputMask = "999,999,999,999.99", ;
		Column3.Name = "Column4", ;
		Column3.Visible = .T., ;
		Column3.Width = 93, ;
		Column4.ColumnOrder = 1, ;
		Column4.ControlSource = "ev_eventosval.idtipovalor", ;
		Column4.CurrentControl = "Tscombobox1", ;
		Column4.FontSize = 8, ;
		Column4.Name = "Tipo", ;
		Column4.Sparse = .F., ;
		Column4.Visible = .T., ;
		Column4.Width = 70, ;
		Column5.ColumnOrder = 4, ;
		Column5.ControlSource = "ev_eventosval.fchcheque", ;
		Column5.FontSize = 8, ;
		Column5.Name = "Column5", ;
		Column5.Width = 60
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="grid" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Banco.Header1' AS header WITH ;
		Caption = "Banco", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Banco.Tscombobox3' AS tscombobox WITH ;
		BorderStyle = 0, ;
		BoundColumn = 2, ;
		cmdsql = Select descripcion,convert(char(10),idbanco) as IdBanco from bs_Bancos order by 1, ;
		ColumnCount = 2, ;
		ColumnWidths = "150,0", ;
		condicionvalidacion = , ;
		cursor = Bancos, ;
		editable = .T., ;
		FirstElement = 1, ;
		Height = 22, ;
		Left = 163, ;
		Name = "Tscombobox3", ;
		NumberOfElements = 0, ;
		solonuevo = .T., ;
		SpecialEffect = 1, ;
		Style = 2, ;
		TabIndex = 12, ;
		Top = 150, ;
		Width = 194
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="combobox" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column2.Header1' AS header WITH ;
		Caption = "Cheque Nº", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column2.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1", ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column4.Header1' AS header WITH ;
		Caption = "Importe", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column4.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999,999,999.99", ;
		Margin = 0, ;
		Name = "Text1", ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128, ;
		Visible = .T.
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column5.Header1' AS header WITH ;
		Caption = "Fecha", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Column5.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		FontSize = 8, ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1", ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Tipo.Header1' AS header WITH ;
		Caption = "Tipo", ;
		FontSize = 8, ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Pageframe1.Page1.Tsfact1.Tipo.Tscombobox1' AS tscombobox WITH ;
		BorderStyle = 0, ;
		BoundColumn = 2, ;
		cmdsql = Select TipoValor,convert(char(10),IdTipoValor) from ts_TipoValor , ;
		ColumnCount = 2, ;
		ColumnLines = .T., ;
		condicionvalidacion = , ;
		cursor = cTipoValor, ;
		editable = .T., ;
		Left = 18, ;
		Name = "Tscombobox1", ;
		SpecialEffect = 1, ;
		Style = 2, ;
		Top = 26, ;
		Visible = .T.
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="combobox" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel1' AS tslabel WITH ;
		Caption = "Contrato", ;
		Height = 16, ;
		Left = 11, ;
		Name = "Tslabel1", ;
		TabIndex = 1, ;
		Top = 14, ;
		Width = 59, ;
		ZOrderSet = 5
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel10' AS tslabel WITH ;
		Alignment = 2, ;
		BackColor = 154,173,203, ;
		BackStyle = 1, ;
		BorderStyle = 1, ;
		Caption = "Detalle de Pago", ;
		ForeColor = 255,255,255, ;
		Height = 157, ;
		Left = 11, ;
		Name = "Tslabel10", ;
		Style = 0, ;
		TabIndex = 13, ;
		Top = 294, ;
		Width = 444, ;
		ZOrderSet = 0
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel11' AS tslabel WITH ;
		Caption = "Total de Excedentes", ;
		Height = 16, ;
		Left = 203, ;
		Name = "Tslabel11", ;
		TabIndex = 15, ;
		Top = 268, ;
		Width = 119, ;
		ZOrderSet = 28
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel12' AS tslabel WITH ;
		Alignment = 2, ;
		BackColor = 154,173,203, ;
		BackStyle = 1, ;
		BorderStyle = 1, ;
		Caption = "Detalle de Consumo", ;
		ForeColor = 255,255,255, ;
		Height = 16, ;
		Left = 11, ;
		Name = "Tslabel12", ;
		Style = 0, ;
		TabIndex = 13, ;
		Top = 71, ;
		Width = 444, ;
		ZOrderSet = 29
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel13' AS tslabel WITH ;
		Caption = "Niños Adicionales", ;
		Height = 16, ;
		Left = 479, ;
		Name = "Tslabel13", ;
		TabIndex = 1, ;
		Top = 74, ;
		Width = 112, ;
		ZOrderSet = 31
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel14' AS tslabel WITH ;
		Caption = "Importe Adicional", ;
		Height = 16, ;
		Left = 479, ;
		Name = "Tslabel14", ;
		TabIndex = 1, ;
		Top = 104, ;
		Width = 112, ;
		ZOrderSet = 33
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel15' AS tslabel WITH ;
		Caption = "Sucursal", ;
		Height = 16, ;
		Left = 222, ;
		Name = "Tslabel15", ;
		TabIndex = 1, ;
		Top = 14, ;
		Width = 59
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel2' AS tslabel WITH ;
		Caption = "Seña", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel2", ;
		TabIndex = 1, ;
		Top = 284, ;
		Width = 88, ;
		ZOrderSet = 11
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel3' AS tslabel WITH ;
		Caption = "Excedentes", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel3", ;
		TabIndex = 1, ;
		Top = 134, ;
		Width = 88, ;
		ZOrderSet = 13
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel4' AS tslabel WITH ;
		Caption = "Saldo", ;
		FontBold = .T., ;
		ForeColor = 0,0,160, ;
		Height = 16, ;
		Left = 527, ;
		Name = "Tslabel4", ;
		TabIndex = 1, ;
		Top = 314, ;
		Width = 64, ;
		ZOrderSet = 15
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel5' AS tslabel WITH ;
		Caption = "Calcular IVA", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel5", ;
		TabIndex = 1, ;
		Top = 224, ;
		Width = 88, ;
		ZOrderSet = 18
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel6' AS tslabel WITH ;
		Caption = "Total General", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel6", ;
		TabIndex = 1, ;
		Top = 254, ;
		Width = 88, ;
		ZOrderSet = 20
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel7' AS tslabel WITH ;
		Caption = "Sub Total", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel7", ;
		TabIndex = 1, ;
		Top = 194, ;
		Width = 88, ;
		ZOrderSet = 23
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel8' AS tslabel WITH ;
		Caption = "Descuentos", ;
		Height = 16, ;
		Left = 503, ;
		Name = "Tslabel8", ;
		TabIndex = 1, ;
		Top = 164, ;
		Width = 88, ;
		ZOrderSet = 25
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.Tslabel9' AS tslabel WITH ;
		Caption = "Total de Valores", ;
		Height = 16, ;
		Left = 219, ;
		Name = "Tslabel9", ;
		TabIndex = 15, ;
		Top = 420, ;
		Width = 107, ;
		ZOrderSet = 27
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="label" />

	ADD OBJECT 'Pageframe1.Page1.txtAdelanto' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.adelando", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "txtAdelanto", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 284, ;
		Width = 108, ;
		ZOrderSet = 10
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.txtAgasajado' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.agasajado", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		Left = 83, ;
		MaxLength = 50, ;
		Name = "txtAgasajado", ;
		TabIndex = 1, ;
		Top = 44, ;
		Width = 372, ;
		ZOrderSet = 3
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.txtExcedente' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.excedentes", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "txtExcedente", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 134, ;
		Width = 108, ;
		ZOrderSet = 12
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.txtImportetotal' AS tstextbox WITH ;
		Comment = "", ;
		ControlSource = "ev_eventos.importebasico", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 599, ;
		Name = "txtImportetotal", ;
		ReadOnly = .T., ;
		TabIndex = 1, ;
		Top = 44, ;
		Width = 108, ;
		ZOrderSet = 8
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Pageframe1.Page1.txtTotalValor' AS tstextbox WITH ;
		Comment = "", ;
		editable = .F., ;
		Enabled = .F., ;
		Height = 22, ;
		InputMask = "999,999,999", ;
		Left = 336, ;
		Name = "txtTotalValor", ;
		TabIndex = 16, ;
		Top = 418, ;
		Width = 95, ;
		ZOrderSet = 26
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />
	
	PROCEDURE imprimir
		M.IDEVENTO = EV_EVENTOS.IDEVENTO
		REPORT FORM ev_Cuenta NOCONSOLE PREVIEW
	ENDPROC

	PROCEDURE lallowedits_access
		RETURN ISNULL(EV_EVENTOS.ESTADO)
	ENDPROC

	PROCEDURE Load
		DODEFAULT()
		this.sucursal=oApp.Sucursal
	ENDPROC

	PROCEDURE Unload
		DODEFAULT()
		oApp.Sucursal=this.sucursal
		
	ENDPROC

	PROCEDURE validar
		THISFORM.PAGEFRAME1.PAGE1.TOTAL.REFRESH()
	ENDPROC

	PROCEDURE Pageframe1.Page1.Cbosucursal1.Init
		DODEFAULT()
		this.Value=oApp.Sucursal
	ENDPROC

	PROCEDURE Pageframe1.Page1.Cbosucursal1.InteractiveChange
		oApp.Sucursal = this.value
	ENDPROC

	PROCEDURE Pageframe1.Page1.Cbosucursal1.Refresh
		THIS.ENABLED = oapp.Permisos(408)
		
	ENDPROC

	PROCEDURE Pageframe1.Page1.Descuento.LostFocus
		IF THIS.TAG<>STR(THIS.VALUE)
		THIS.PARENT.TSCHECKBOX1.INTERACTIVECHANGE()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.borraritem
		DODEFAULT()
		This.parent.total.Refresh()
		
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.Column5.Text1.Click
		THIS.DBLCLICK()
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.Column5.Text1.GotFocus
		THIS.TAG = STR(THIS.VALUE)
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.Column5.Text1.LostFocus
		IF THIS.TAG<>STR(THIS.VALUE)
		THIS.PARENT.PARENT.PARENT.TOTAL.REFRESH()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.Descripcion.Header1.Click
		SELECT EV_EVENTOSDET
		INDEX ON DESCRIPCION TAG DESC
	ENDPROC

	PROCEDURE Pageframe1.Page1.grdEv_eventosdet.Refresh
		DODEFAULT()
		THIS.TOTAL.ENABLED = .F.
		THIS.PRECIO.ENABLED = .F.
		THIS.DESCRIPCION.ENABLED = .F.
	ENDPROC

	PROCEDURE Pageframe1.Page1.Iva.Refresh
		**
		** ReFox - este procedimiento es vacío **
		**
	ENDPROC

	PROCEDURE Pageframe1.Page1.NroAdicional.LostFocus
		IF THIS.TAG<>STR(THIS.VALUE)
		THIS.PARENT.TSCHECKBOX1.INTERACTIVECHANGE()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.Saldo.Refresh
		THIS.VALUE = (THIS.PARENT.TXTIMPORTETOTAL.VALUE+THIS.PARENT.COSTOADICIONAL.VALUE+THIS.PARENT.TXTEXCEDENTE.VALUE+THIS.PARENT.IVA.VALUE)-(THIS.PARENT.TXTADELANTO.VALUE+THIS.PARENT.DESCUENTO.VALUE)
		THIS.PARENT.SUBTOTAL.VALUE = (THIS.PARENT.TXTIMPORTETOTAL.VALUE+THIS.PARENT.COSTOADICIONAL.VALUE+THIS.PARENT.TXTEXCEDENTE.VALUE)-(THIS.PARENT.DESCUENTO.VALUE)
	ENDPROC

	PROCEDURE Pageframe1.Page1.total.Refresh
		THIS.PARENT.GRDEV_EVENTOSDET.SUMCOLUMN()
		THIS.VALUE = THIS.PARENT.GRDEV_EVENTOSDET.TOTALES(1)
		IF THISFORM.EDITMODE
		THIS.PARENT.TXTEXCEDENTE.VALUE = THIS.VALUE
		THIS.PARENT.TSCHECKBOX1.INTERACTIVECHANGE()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.TotalGeneral.Refresh
		**
		** ReFox - este procedimiento es vacío **
		**
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscheckbox1.InteractiveChange
		THIS.PARENT.COSTOADICIONAL.VALUE = NVL(EV_EVENTOS.ADICIONALUNITARIO*EV_EVENTOS.NROADICIONAL,0)
		IF THIS.VALUE=.T.
		THIS.PARENT.IVA.VALUE = ROUND((NVL(THIS.PARENT.TXTIMPORTETOTAL.VALUE,0)+NVL(THIS.PARENT.COSTOADICIONAL.VALUE,0)+NVL(THIS.PARENT.TXTEXCEDENTE.VALUE,0)-(NVL(THIS.PARENT.DESCUENTO.VALUE,0)))*0.1 , 0)
		ELSE
		THIS.PARENT.IVA.VALUE = 0
		ENDIF
		THIS.PARENT.TOTALGENERAL.VALUE = NVL(THIS.PARENT.TXTIMPORTETOTAL.VALUE,0)+NVL(THIS.PARENT.TXTEXCEDENTE.VALUE,0)+NVL(THIS.PARENT.IVA.VALUE,0)-(NVL(THIS.PARENT.DESCUENTO.VALUE,0))+NVL(THIS.PARENT.COSTOADICIONAL.VALUE,0)
		THIS.PARENT.SALDO.REFRESH()
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscheckbox1.Refresh
		DODEFAULT()
		IF THISFORM.EDITMODE
		THIS.CLICK()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton1.Click
		IF THISFORM.PAGEFRAME1.PAGE1.TXTTOTALVALOR.VALUE+NVL(THIS.PARENT.TXTADELANTO.VALUE, 0)<>EV_EVENTOS.TOTALGENERAL
			MESSAGEBOX("Existe una diferencia entre la suma de los Valores y el Total General.", 64, "Futura Software")
			RETURN .F.
		ENDIF
		IF MESSAGEBOX("Esta seguro que desea cerrar este contrato?", 068, "Futura Software")=6
			IF THISFORM.EDITMODE
				IF  .NOT. THISFORM.SAVE()
					RETURN
				ENDIF
			ENDIF
			THISFORM.EDITAR()
			m.LIVA = IIF(EV_EVENTOS.CALCULARIVA, 10, 0)
			IDUSUARIO = OAPP.GETEMPLOYEEID()
			IF THISFORM.RUNSQL('exec EV_FacturaEvento ?ev_Eventos.IdEvento,?m.IdUsuario, ?m.lIva', 'cFactura')>0
				REPLACE ESTADO WITH 'C', IDFACTURA WITH CFACTURA.IDFACTURA IN EV_EVENTOS
				THISFORM.SAVE()
			ENDIF
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton1.Refresh
		THIS.ENABLED = ISNULL(EV_EVENTOS.ESTADO)
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton2.Click
		THIS.PARENT.TSFACT1.AGREGARITEM(.F.)
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton3.Click
		THIS.PARENT.TSFACT1.BORRARITEM()
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton4.Click
		IF MESSAGEBOX("Esta seguro que desea cerrar este contrato?", 068, "Futura Software")=6
			IF THISFORM.EDITMODE
				IF  .NOT. THISFORM.SAVE()
					RETURN
				ENDIF
			ENDIF
			THISFORM.EDITAR()
			m.LIVA = IIF(EV_EVENTOS.CALCULARIVA, 10, 0)
			IDUSUARIO = OAPP.GETEMPLOYEEID()
			IF THISFORM.RUNSQL('Delete vt_Factura where vt_Factura.IdFActura =?ev_Eventos.IdFactura', 'cFactura')>0
				REPLACE ESTADO WITH null, IDFACTURA WITH null IN EV_EVENTOS
				THISFORM.SAVE()
			ENDIF
		ENDIF
		 
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tscommandbutton4.Refresh
		THIS.ENABLED = NVL(EV_EVENTOS.ESTADO,"")="C" and oapp.Permisos(407)
		
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tsfact1.Column2.Text1.When
		RETURN EV_EVENTOSVAL.IDTIPOVALOR<>'01'
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tsfact1.Column4.Text1.GotFocus
		THIS.TAG = STR(THIS.VALUE)
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tsfact1.Column4.Text1.LostFocus
		IF THIS.TAG<>STR(THIS.VALUE)
		THIS.PARENT.PARENT.PARENT.TXTTOTALVALOR.REFRESH()
		ENDIF
	ENDPROC

	PROCEDURE Pageframe1.Page1.Tsfact1.Refresh
		DODEFAULT()
		THIS.PARENT.TXTTOTALVALOR.REFRESH()
	ENDPROC

	PROCEDURE Pageframe1.Page1.txtTotalValor.LostFocus
		**
		** ReFox - este procedimiento es vacío **
		**
	ENDPROC

	PROCEDURE Pageframe1.Page1.txtTotalValor.Refresh
		THIS.PARENT.TSFACT1.SUMCOLUMN()
		THIS.VALUE = THIS.PARENT.TSFACT1.TOTALES(1)
	ENDPROC

ENDDEFINE
