*--------------------------------------------------------------------------------------------------------------------------------------------------------
* (ES) AUTOGENERADO - ¡¡ATENCIÓN!! - ¡¡NO PENSADO PARA EJECUTAR!! USAR SOLAMENTE PARA INTEGRAR CAMBIOS Y ALMACENAR CON HERRAMIENTAS SCM!!
* (EN) AUTOGENERATED - ATTENTION!! - NOT INTENDED FOR EXECUTION!! USE ONLY FOR MERGING CHANGES AND STORING WITH SCM TOOLS!!
*--------------------------------------------------------------------------------------------------------------------------------------------------------
*< FOXBIN2PRG: Version="1.19" SourceFile="rs_dividir.scx" /> (Solo para binarios VFP 9 / Only for VFP 9 binaries)
*
*
DEFINE CLASS dataenvironment AS dataenvironment 
 	*< CLASSDATA: Baseclass="dataenvironment" Timestamp="" Scale="" Uniqueid="" ClassIcon="2" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="Cursor1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cursor3" UniqueID="" Timestamp="" />

	DataSource = .NULL.
	Height = 200
	Left = 1
	Name = "Dataenvironment"
	Top = 220
	Width = 520

	ADD OBJECT 'Cursor1' AS cursor WITH ;
		Alias = "rs_servicios", ;
		CursorSource = "rs_servicios", ;
		Database = ..\data\datos.dbc, ;
		Height = 90, ;
		Left = 10, ;
		Name = "Cursor1", ;
		NoDataOnLoad = .T., ;
		Top = 20, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor2' AS cursor WITH ;
		Alias = "rs_serviciosdet", ;
		BufferModeOverride = 5, ;
		CursorSource = "rs_serviciosdet", ;
		Database = ..\data\datos.dbc, ;
		Height = 90, ;
		Left = 188, ;
		Name = "Cursor2", ;
		NoDataOnLoad = .T., ;
		Top = 23, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

	ADD OBJECT 'Cursor3' AS cursor WITH ;
		Alias = "rs_serviciosdet1", ;
		BufferModeOverride = 5, ;
		CursorSource = "rs_serviciosdet", ;
		Database = ..\data\datos.dbc, ;
		Height = 90, ;
		Left = 348, ;
		Name = "Cursor3", ;
		NoDataOnLoad = .T., ;
		Top = 19, ;
		Width = 90
		*< END OBJECT: BaseClass="cursor" />

ENDDEFINE

DEFINE CLASS tsbaseform12 AS tsbaseform OF "..\libs\tsbase.vcx" 
 	*< CLASSDATA: Baseclass="form" Timestamp="" Scale="" Uniqueid="" />

	*-- OBJECTDATA items order determines ZOrder / El orden de los items OBJECTDATA determina el ZOrder 
	*< OBJECTDATA: ObjPath="txtMesa" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Cantidad.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Cantidad.txtCantidad" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column6.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column6.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column7.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column7.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column8.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="grdRs_serviciosdet.Column8.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Idcliente1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Cliente" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tstextbox1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Text2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Cantidad.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Cantidad.txtCantidad" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column6.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column6.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column7.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column7.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column8.Header1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tsgrid1.Column8.Text1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Idcliente2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tstextbox2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tstextbox3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Text3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtTotal" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Label1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="txtTotal1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Label2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tscommandbutton1" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tscommandbutton2" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tscommandbutton3" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="Tscommandbutton4" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="cmdCancel" UniqueID="" Timestamp="" />
	*< OBJECTDATA: ObjPath="cmdOk" UniqueID="" Timestamp="" />

	*<DefinedPropArrayMethod>
		*p: idfactura
	*</DefinedPropArrayMethod>

	Caption = "Dividir Cuenta"
	DataSession = 2
	DoCreate = .T.
	Height = 446
	idfactura = .F.
	MaxButton = .F.
	MinButton = .F.
	Name = "Tsbaseform12"
	ShowWindow = 1
	tabla1 = rs_Servicios
	tabla2 = rs_ServiciosDet1
	Width = 800
	WindowType = 1
	lblRequerido.Name = "lblRequerido"

	ADD OBJECT 'Cliente' AS tstextbox WITH ;
		editable = .F., ;
		Enabled = .F., ;
		FontSize = 9, ;
		Height = 25, ;
		Left = 12, ;
		Name = "Cliente", ;
		Top = 52, ;
		Width = 193
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'cmdCancel' AS tscommandbutton WITH ;
		Cancel = .T., ;
		Caption = "Cancelar", ;
		Height = 44, ;
		Left = 651, ;
		Name = "cmdCancel", ;
		Top = 395, ;
		Width = 132
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'cmdOk' AS tscommandbutton WITH ;
		Caption = "Aceptar", ;
		Height = 44, ;
		Left = 507, ;
		Name = "cmdOk", ;
		Top = 395, ;
		Width = 132
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'grdRs_serviciosdet' AS tsgrid WITH ;
		campo = IdServicio,IdEmpresa, ;
		cfieldtosum = Importe, ;
		ColumnCount = 4, ;
		GridLines = 1, ;
		Height = 220, ;
		Highlight = .T., ;
		Left = 12, ;
		Name = "grdRs_serviciosdet", ;
		Panel = 1, ;
		ReadOnly = .T., ;
		RecordSource = "rs_serviciosdet", ;
		RecordSourceType = 1, ;
		RowHeight = 40, ;
		ScrollBars = 2, ;
		Top = 108, ;
		valor = rs_Servicios.IdServicio,oApp.Empresa, ;
		Width = 367, ;
		Column1.ColumnOrder = 2, ;
		Column1.ControlSource = "rs_serviciosdet.cantidad", ;
		Column1.Enabled = .F., ;
		Column1.InputMask = "999,99", ;
		Column1.Name = "Cantidad", ;
		Column1.ReadOnly = .T., ;
		Column1.Resizable = .F., ;
		Column1.Width = 30, ;
		Column2.ColumnOrder = 3, ;
		Column2.ControlSource = "rs_serviciosdet.precio", ;
		Column2.Enabled = .F., ;
		Column2.InputMask = "9,999,999", ;
		Column2.Name = "Column6", ;
		Column2.ReadOnly = .T., ;
		Column2.Resizable = .F., ;
		Column2.Width = 50, ;
		Column3.ColumnOrder = 4, ;
		Column3.ControlSource = "rs_serviciosdet.importe", ;
		Column3.Enabled = .F., ;
		Column3.InputMask = "999,999,999", ;
		Column3.Name = "Column7", ;
		Column3.ReadOnly = .T., ;
		Column3.Resizable = .F., ;
		Column3.Width = 60, ;
		Column4.ColumnOrder = 1, ;
		Column4.ControlSource = "rs_serviciosdet.descripcion", ;
		Column4.Enabled = .F., ;
		Column4.Name = "Column8", ;
		Column4.ReadOnly = .T., ;
		Column4.Resizable = .F., ;
		Column4.Width = 165
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="grid" />

	ADD OBJECT 'grdRs_serviciosdet.Cantidad.Header1' AS header WITH ;
		Caption = "Cant.", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grdRs_serviciosdet.Cantidad.txtCantidad' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "999,99", ;
		Margin = 0, ;
		Name = "txtCantidad", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grdRs_serviciosdet.Column6.Header1' AS header WITH ;
		Caption = "Precio", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grdRs_serviciosdet.Column6.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "9,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grdRs_serviciosdet.Column7.Header1' AS header WITH ;
		Caption = "Importe", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grdRs_serviciosdet.Column7.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'grdRs_serviciosdet.Column8.Header1' AS header WITH ;
		Caption = "Descripción", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'grdRs_serviciosdet.Column8.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Idcliente1' AS idcliente WITH ;
		aplicarretorno = .F., ;
		ControlSource = "rs_servicios.idcliente", ;
		Left = 107, ;
		Name = "Idcliente1", ;
		Top = 25, ;
		Visible = .F.
		*< END OBJECT: ClassLib="..\libs\futura.vcx" BaseClass="textbox" />

	ADD OBJECT 'Idcliente2' AS idcliente WITH ;
		aplicarretorno = .F., ;
		ControlSource = "rs_servicios.idcliente", ;
		Left = 527, ;
		Name = "Idcliente2", ;
		Top = 25, ;
		Visible = .F.
		*< END OBJECT: ClassLib="..\libs\futura.vcx" BaseClass="textbox" />

	ADD OBJECT 'Label1' AS label WITH ;
		Anchor = 8, ;
		AutoSize = .F., ;
		BackStyle = 0, ;
		Caption = "Total", ;
		FontBold = .T., ;
		FontSize = 12, ;
		Height = 22, ;
		Left = 162, ;
		Name = "Label1", ;
		Top = 352, ;
		Width = 40
		*< END OBJECT: BaseClass="label" />

	ADD OBJECT 'Label2' AS label WITH ;
		Anchor = 8, ;
		AutoSize = .F., ;
		BackStyle = 0, ;
		Caption = "Total", ;
		FontBold = .T., ;
		FontSize = 12, ;
		Height = 22, ;
		Left = 583, ;
		Name = "Label2", ;
		Top = 352, ;
		Width = 40
		*< END OBJECT: BaseClass="label" />

	ADD OBJECT 'Text1' AS textbox WITH ;
		ControlSource = "rs_servicios.idmesa", ;
		DisabledForeColor = 0,0,0, ;
		Enabled = .F., ;
		Height = 25, ;
		Left = 14, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		Top = 24, ;
		Width = 63
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Text2' AS textbox WITH ;
		ControlSource = "rs_servicios.mesa", ;
		DisabledForeColor = 0,0,0, ;
		Enabled = .F., ;
		Height = 25, ;
		Left = 499, ;
		Name = "Text2", ;
		ReadOnly = .T., ;
		Top = 24, ;
		Width = 126
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Text3' AS textbox WITH ;
		ControlSource = "rs_servicios.idmesa", ;
		DisabledForeColor = 0,0,0, ;
		Enabled = .F., ;
		Height = 25, ;
		Left = 434, ;
		Name = "Text3", ;
		ReadOnly = .T., ;
		Top = 24, ;
		Width = 63
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Tscommandbutton1' AS tscommandbutton WITH ;
		Caption = "", ;
		Height = 43, ;
		Left = 384, ;
		Name = "Tscommandbutton1", ;
		Picture = ..\bitmaps\lstrec_s.bmp, ;
		Top = 109, ;
		Width = 46
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Tscommandbutton2' AS tscommandbutton WITH ;
		Caption = "", ;
		Height = 43, ;
		Left = 384, ;
		Name = "Tscommandbutton2", ;
		Picture = ..\bitmaps\nxtrec_s.bmp, ;
		Top = 157, ;
		Width = 46
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Tscommandbutton3' AS tscommandbutton WITH ;
		Caption = "", ;
		Height = 43, ;
		Left = 384, ;
		Name = "Tscommandbutton3", ;
		Picture = ..\bitmaps\prvrec_s.bmp, ;
		Top = 217, ;
		Width = 46
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Tscommandbutton4' AS tscommandbutton WITH ;
		Caption = "", ;
		Height = 43, ;
		Left = 384, ;
		Name = "Tscommandbutton4", ;
		Picture = ..\bitmaps\frsrec_s.bmp, ;
		Top = 265, ;
		Width = 46
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="commandbutton" />

	ADD OBJECT 'Tsgrid1' AS tsgrid WITH ;
		campo = IdServicio,IdEmpresa, ;
		cfieldtosum = Importe, ;
		ColumnCount = 4, ;
		GridLines = 1, ;
		Height = 220, ;
		Highlight = .T., ;
		Left = 432, ;
		Name = "Tsgrid1", ;
		Panel = 1, ;
		ReadOnly = .T., ;
		RecordSource = "rs_serviciosdet1", ;
		RecordSourceType = 1, ;
		RowHeight = 40, ;
		ScrollBars = 2, ;
		Top = 108, ;
		valor = rs_Servicios.IdServicio,oApp.Empresa, ;
		Width = 367, ;
		Column1.ColumnOrder = 2, ;
		Column1.ControlSource = "rs_serviciosdet1.cantidad", ;
		Column1.Enabled = .F., ;
		Column1.InputMask = "999,99", ;
		Column1.Name = "Cantidad", ;
		Column1.ReadOnly = .T., ;
		Column1.Resizable = .F., ;
		Column1.Width = 30, ;
		Column2.ColumnOrder = 3, ;
		Column2.ControlSource = "rs_serviciosdet1.precio", ;
		Column2.Enabled = .F., ;
		Column2.InputMask = "9,999,999", ;
		Column2.Name = "Column6", ;
		Column2.ReadOnly = .T., ;
		Column2.Resizable = .F., ;
		Column2.Width = 50, ;
		Column3.ColumnOrder = 4, ;
		Column3.ControlSource = "rs_serviciosdet1.importe", ;
		Column3.Enabled = .F., ;
		Column3.InputMask = "999,999,999", ;
		Column3.Name = "Column7", ;
		Column3.ReadOnly = .T., ;
		Column3.Resizable = .F., ;
		Column3.Width = 60, ;
		Column4.ColumnOrder = 1, ;
		Column4.ControlSource = "rs_serviciosdet1.descripcion", ;
		Column4.Enabled = .F., ;
		Column4.Name = "Column8", ;
		Column4.ReadOnly = .T., ;
		Column4.Resizable = .F., ;
		Column4.Width = 165
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="grid" />

	ADD OBJECT 'Tsgrid1.Cantidad.Header1' AS header WITH ;
		Caption = "Cant.", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Tsgrid1.Cantidad.txtCantidad' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "999,99", ;
		Margin = 0, ;
		Name = "txtCantidad", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Tsgrid1.Column6.Header1' AS header WITH ;
		Caption = "Precio", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Tsgrid1.Column6.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "9,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Tsgrid1.Column7.Header1' AS header WITH ;
		Caption = "Importe", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Tsgrid1.Column7.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		InputMask = "999,999,999", ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Tsgrid1.Column8.Header1' AS header WITH ;
		Caption = "Descripción", ;
		Name = "Header1"
		*< END OBJECT: BaseClass="header" />

	ADD OBJECT 'Tsgrid1.Column8.Text1' AS textbox WITH ;
		BackColor = 255,255,255, ;
		BorderStyle = 0, ;
		Enabled = .F., ;
		ForeColor = 0,0,0, ;
		Margin = 0, ;
		Name = "Text1", ;
		ReadOnly = .T., ;
		SelectedBackColor = 247,223,187, ;
		SelectedForeColor = 0,64,128
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'Tstextbox1' AS tstextbox WITH ;
		ControlSource = "rs_servicios.fecha", ;
		editable = .F., ;
		Enabled = .F., ;
		FontSize = 9, ;
		Height = 25, ;
		Left = 12, ;
		Name = "Tstextbox1", ;
		Top = 80, ;
		Width = 193
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Tstextbox2' AS tstextbox WITH ;
		editable = .F., ;
		Enabled = .F., ;
		FontSize = 9, ;
		Height = 25, ;
		Left = 432, ;
		Name = "Tstextbox2", ;
		Top = 52, ;
		Width = 193
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'Tstextbox3' AS tstextbox WITH ;
		ControlSource = "rs_servicios.fecha", ;
		editable = .F., ;
		Enabled = .F., ;
		FontSize = 9, ;
		Height = 25, ;
		Left = 432, ;
		Name = "Tstextbox3", ;
		Top = 80, ;
		Width = 193
		*< END OBJECT: ClassLib="..\libs\tsbase.vcx" BaseClass="textbox" />

	ADD OBJECT 'txtMesa' AS textbox WITH ;
		ControlSource = "rs_servicios.mesa", ;
		DisabledForeColor = 0,0,0, ;
		Enabled = .F., ;
		Height = 25, ;
		Left = 79, ;
		Name = "txtMesa", ;
		ReadOnly = .T., ;
		Top = 24, ;
		Width = 126
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'txtTotal' AS textbox WITH ;
		Anchor = 8, ;
		ControlSource = "", ;
		FontBold = .T., ;
		FontSize = 12, ;
		Height = 36, ;
		InputMask = "999,999,999.99", ;
		Left = 210, ;
		Name = "txtTotal", ;
		ReadOnly = .T., ;
		Top = 348, ;
		Width = 150
		*< END OBJECT: BaseClass="textbox" />

	ADD OBJECT 'txtTotal1' AS textbox WITH ;
		Anchor = 8, ;
		ControlSource = "", ;
		FontBold = .T., ;
		FontSize = 12, ;
		Height = 36, ;
		InputMask = "999,999,999.99", ;
		Left = 631, ;
		Name = "txtTotal1", ;
		ReadOnly = .T., ;
		Top = 348, ;
		Width = 150
		*< END OBJECT: BaseClass="textbox" />
	
	PROCEDURE Init
		LPARAMETERS IdMesa
		DODEFAULT()
		REQUERY('rs_servicios')
		m.IdServicio = rs_servicios.IdServicio
		REQUERY('rs_ServiciosDet')
		this.idfactura=0
		
		
	ENDPROC

	PROCEDURE Unload
		RETURN this.idfactura
		
		
	ENDPROC

	PROCEDURE cmdCancel.Click
		thisform.Release()
		
	ENDPROC

	PROCEDURE cmdOk.Click
		
		SELECT rs_Servicios
		SCATTER MEMVAR memo 
		APPEND BLANK
		GATHER MEMVAR MEMO 
		replace  IdServicio WITH newID("rs_Servicios")
		
		*!*		INSERT INTO rs_Servicios(IdEmpresa,IdServicio,IdMesa,Estado,Fecha,IdCaja,Mesa);
		*!*			values(oApp.Empresa,newID("rs_Servicios"),rs_Servicios.IdMesa,'A',Getdate(),rs_Servicios.idcaja,rs_Servicios.Mesa) 
		
		SELECT rs_ServiciosDet1
		replace idServicio WITH rs_Servicios.IdServicio ALL 
		
		IF thisform.save()
			 DO FORM rs_cobro WITH rs_Servicios.IdServicio,ThisForm.txtTotal1.Value TO lcResultado
			 
			 IF lcResultado>0
				 thisform.tabla3="rs_ServiciosDet"
				 thisform.save()
				 thisform.idfactura=lcResultado 
				 thisform.Release()
				 	 
			ENDIF
				 
			 
		ENDIF
			 
		
	ENDPROC

	PROCEDURE grdRs_serviciosdet.Resize
		IF thisform.WindowState= 0
			This.Column8.Width=165
		ENDIF
		IF thisform.WindowState= 2
			this.column8.AutoFit()
		ENDIF
			
		
			
	ENDPROC

	PROCEDURE Tscommandbutton1.Click
		SELECT rs_serviciosDet
		SCATTER MEMVAR memo FIELDS IdEmpresa,IdProducto,Cantidad,Precio,Importe, Comensal,Descripcion
		
		SELECT rs_serviciosDet1
		APPEND BLANK
		GATHER MEMVAR MEMO
		replace IdServicioDet WITH newId('rs_ServiciosDet')    
		
		
		SELECT rs_serviciosDet
		DELETE 
			
		*!*	IF m.cantidad=1
		*!*		SELECT rs_serviciosDet
		*!*		DELETE 
		*!*	ELSE
		*!*		SELECT rs_serviciosDet
		*!*		replace cantidad WITH Cantidad-1, Importe WITH precio * Cantidad
		*!*		SELECT rs_serviciosDet1
		*!*		replace cantidad WITH 1, Importe WITH precio * Cantidad
		*!*		
		*!*	ENDIF
		
		SELECT 	rs_serviciosDet
		GO RECNO()
			
		ThisForm.grdRs_serviciosdet.Refresh()
		thisform.tsgrid1.Refresh()
		ThisForm.txtTotal.Refresh()
		ThisForm.txtTotal1.Refresh()
	ENDPROC

	PROCEDURE Tscommandbutton2.Click
		SELECT rs_serviciosDet
		SCATTER MEMVAR memo FIELDS IdEmpresa,IdProducto,Cantidad,Precio,Importe, Comensal,Descripcion
		
		SELECT rs_serviciosDet1
		APPEND BLANK
		GATHER MEMVAR MEMO  
		replace IdServicioDet WITH newId('rs_ServiciosDet')    
		  
		
		IF m.cantidad=1
			SELECT rs_serviciosDet
			DELETE 
		ELSE
			SELECT rs_serviciosDet
			replace cantidad WITH Cantidad-1, Importe WITH precio * Cantidad
			SELECT rs_serviciosDet1
			replace cantidad WITH 1, Importe WITH precio * Cantidad
			
		ENDIF
		
		SELECT 	rs_serviciosDet
		GO RECNO()
			
		ThisForm.grdRs_serviciosdet.Refresh()
		thisform.tsgrid1.Refresh()
		ThisForm.txtTotal.Refresh()
		ThisForm.txtTotal1.Refresh()
		
		
		
	ENDPROC

	PROCEDURE Tscommandbutton3.Click
		SELECT rs_serviciosDet1
		SCATTER MEMVAR memo FIELDS IdEmpresa,IdProducto,Cantidad,Precio,Importe, Comensal,Descripcion
		
		SELECT rs_serviciosDet
		APPEND BLANK
		GATHER MEMVAR MEMO    
		replace IdServicioDet WITH newId('rs_ServiciosDet')    
		
		IF m.cantidad=1
			SELECT rs_serviciosDet1
			DELETE 
		ELSE
			SELECT rs_serviciosDet1
			replace cantidad WITH Cantidad-1, Importe WITH precio * Cantidad
			SELECT rs_serviciosDet
			replace cantidad WITH 1, Importe WITH precio * Cantidad
			
		ENDIF
		
		SELECT 	rs_serviciosDet1
		GO RECNO()
			
		ThisForm.grdRs_serviciosdet.Refresh()
		thisform.tsgrid1.Refresh()
		ThisForm.txtTotal.Refresh()
		ThisForm.txtTotal1.Refresh()
	ENDPROC

	PROCEDURE Tscommandbutton4.Click
		SELECT rs_serviciosDet1
		SCATTER MEMVAR memo FIELDS IdEmpresa,IdProducto,Cantidad,Precio,Importe, Comensal,Descripcion
		
		SELECT rs_serviciosDet
		APPEND BLANK
		GATHER MEMVAR MEMO    
		replace IdServicioDet WITH newId('rs_ServiciosDet')    
		
		
		SELECT rs_serviciosDet1
		DELETE 
			
		*!*	IF m.cantidad=1
		*!*		SELECT rs_serviciosDet
		*!*		DELETE 
		*!*	ELSE
		*!*		SELECT rs_serviciosDet
		*!*		replace cantidad WITH Cantidad-1, Importe WITH precio * Cantidad
		*!*		SELECT rs_serviciosDet1
		*!*		replace cantidad WITH 1, Importe WITH precio * Cantidad
		*!*		
		*!*	ENDIF
		
		SELECT 	rs_serviciosDet1
		GO RECNO()
			
		ThisForm.grdRs_serviciosdet.Refresh()
		thisform.tsgrid1.Refresh()
		ThisForm.txtTotal.Refresh()
		ThisForm.txtTotal1.Refresh()
	ENDPROC

	PROCEDURE Tsgrid1.Resize
		IF thisform.WindowState= 0
			This.Column8.Width=165
		ENDIF
		IF thisform.WindowState= 2
			this.column8.AutoFit()
		ENDIF
			
		
			
	ENDPROC

	PROCEDURE txtTotal.Refresh
		This.parent.grdRs_serviciosdet.sumcolumn()
		this.Value=This.parent.grdRs_serviciosdet.totales(1)
		
	ENDPROC

	PROCEDURE txtTotal1.Refresh
		This.parent.tsgrid1.sumcolumn()
		this.Value=This.parent.tsgrid1.totales(1)
		
	ENDPROC

ENDDEFINE
