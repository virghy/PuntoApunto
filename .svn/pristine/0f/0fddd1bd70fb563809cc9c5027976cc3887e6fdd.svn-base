*       *********************************************************
*       *                                                         
*       * 11/01/2013              RST.MPR               15:38:39  
*       *                                                         
*       *********************************************************
*       *                                                         
*       * Author's Name                                           
*       *                                                         
*       * Copyright (C) 2013 Company Name                         
*       * Address                                                 
*       * City,     Zip                                           
*       *                                                         
*       * Description:                                            
*       * This PROGRAM was automatically generated BY GENMENU.    
*       *                                                         
*       *********************************************************


*       *********************************************************
*       *                                                         
*       *                      Menu Definition                    
*       *                                                         
*       *********************************************************
*


DEFINE PAD _movimientos OF _MSYSMENU PROMPT "\<Movimientos" COLOR SCHEME 3 ;
	AFTER _MEDIT ;
	KEY ALT+M, ""
DEFINE PAD _definiciones OF _MSYSMENU PROMPT "\<Definiciones" COLOR SCHEME 3 ;
	AFTER _movimientos ;
	KEY ALT+D, "ALT+D"
ON PAD _movimientos OF _MSYSMENU ACTIVATE POPUP movimiento
ON PAD _definiciones OF _MSYSMENU ACTIVATE POPUP definicion

DEFINE POPUP movimiento MARGIN RELATIVE SHADOW COLOR SCHEME 4
DEFINE BAR 1 OF movimiento PROMPT "Ventas" ;
	SKIP FOR !oApp.Permisos(7)
DEFINE BAR 2 OF movimiento PROMPT "\-"
DEFINE BAR 3 OF movimiento PROMPT "Produccion" ;
	SKIP FOR !oApp.Permisos(484)
ON SELECTION BAR 1 OF movimiento ;
	DO _3ou0xj458 ;
	IN LOCFILE("..\SISTEMAS\FUTURA9\MENUS\RST" ,"MPX;MPR|FXP;PRG" ,"WHERE is RST?")
ON SELECTION BAR 3 OF movimiento oApp.DoForm('rs_movimiento')

DEFINE POPUP definicion MARGIN RELATIVE SHADOW COLOR SCHEME 4
DEFINE BAR 1 OF definicion PROMPT "Sectores" ;
	SKIP FOR !oApp.Permisos(463)
DEFINE BAR 2 OF definicion PROMPT "Mesas"
DEFINE BAR 3 OF definicion PROMPT "Panel de Cocina"
ON SELECTION BAR 1 OF definicion oApp.DoForm('rs_sectores')
ON SELECTION BAR 2 OF definicion oApp.DoForm('rs_mesas')
ON SELECTION BAR 3 OF definicion oApp.DoForm('rs_Panelcocina')

ON SELECTION MENU _MSYSMENU *-- (C) MICROSOFT CORPORATION 1995

*       *********************************************************
*       *                                                         
*       * _3OU0XJ458  ON SELECTION BAR 1 OF POPUP movimiento      
*       *                                                         
*       * Procedure Origin:                                       
*       *                                                         
*       * From Menu:  RST.MPR,            Record:    5            
*       * Called By:  ON SELECTION BAR 1 OF POPUP movimiento      
*       * Prompt:     Ventas                                      
*       * Snippet:    1                                           
*       *                                                         
*       *********************************************************
*
PROCEDURE _3ou0xj458
TEXT TO cmdsql TEXTMERGE NOSHOW
	SELECT IdCaja FROM vt_caja
		where idEmpresa=?oApp.Empresa
		and IdUsuario = '<<oApp.GetEmployeeId()>>'
		and Estado is null
ENDTEXT
IF sql(cmdsql,'cCaja') > 0 .AND. RECCOUNT('cCaja') = 0
TEXT TO cmdsql TEXTMERGE NOSHOW
	SELECT IdCaja FROM vt_caja
		where idEmpresa=?oApp.Empresa
		and Compartido = 1
		and Estado is null
ENDTEXT
IF sql(cmdsql,'cCaja') > 0 .AND. RECCOUNT('cCaja') = 0


 MESSAGEBOX( ;
           "No existe ninguna caja abierta para realizar esta operacion.",  ;
           64, 'Terminal de Punto de Venta')
 RETURN
ENDIF

ENDIF
*_SCREEN.windowstate = 1
*_screen.WindowState= 1
*LOCAL frm AS FORM
*VT_TPV_FORM

*!*	LOCAL lcForm as String
*!*	lcForm ="vt_tpv"
*!*	If SQL("Select convert(char(20),dbo.LEERCONSTANTE(?oApp.Empresa,'VT_TPV_FORM ')) as Valor", 'cConfig')>0
*!*		If !EMPTY(NVL(CCONFIG.VALOR,"vt_tpv"))
*!*			lcForm = NVL(CCONFIG.VALOR,"vt_tpv")
*!*		Endif
*!*	ENDIF
*rs_restaurant


*DO FORM (lcForm) NAME frm  WITH ccaja.idcaja

DO FORM rs_restaurant NAME frm WITH ccaja.idcaja
*frm.zorder(0)
*frm.show()
ACTIVATE WINDOW (frm.name) TOP

*--
